<div class="p-6 max-w-7xl mx-auto space-y-8">
    <div class="subcard flex justify-between p-12">
        <div>
            <h3
                class="text-3xl !mb-1 !font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
                Bienvenue, {{ username | titlecase }} !</h3>
            <p class="text-muted font-medium">G√©rez vos parties de devinettes</p>
        </div>
        <button class="btn btn-red-outline self-center !mt-0" (click)="logout()">D√©connexion</button>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

        <!-- Create Game box -->
        <div class="subcard border-green-500/20 flex flex-col">
            <div class="subcard__title text-green-400">
                üéÆ Cr√©er une partie
            </div>
            <div class="subcard !p-4 !rounded-lg flex justify-between items-center">
                <div class="flex flex-col">
                    <span class="font-medium">Type de partie</span>
                    <span class="text-sm text-muted">
                        {{isPrivate ? 'Partie priv√©e - Sur invitation uniquement':'Partie publique - Visible par tous'}}
                    </span>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" [(ngModel)]="isPrivate" class="sr-only peer">
                    <div class="slide-toggle"></div>
                    <span [ngClass]="isPrivate ? 'text-blue-500' : 'text-green-500'"
                        class="ml-3 text-sm font-medium">{{isPrivate ? 'Priv√©e':
                        'Public'}}</span>
                </label>
            </div>
            <button class="btn btn-green w-full lg:!mt-auto" (click)="createGame()">‚ú® Cr√©er la partie
            </button>
        </div>

        <!-- Join Game box -->
        <div class="subcard border-purple-500/20">
            <div class="subcard__title text-purple-400">
                üîó Rejoindre par ID
            </div>
            <div class="flex flex-col">
                <label class="text-m font-medium text-muted mb-1">ID de la partie</label>
                <mat-form-field>
                    <mat-label>Game ID</mat-label>
                    <input [(ngModel)]="gameID" matInput placeholder="6ea005b2f9ba">
                </mat-form-field>
                <mat-error class="mb-2" *ngIf="noGameFound && gameID !=='' ">
                    partie non trouv√©e
                </mat-error>
            </div>
            <button [disabled]="gameID === ''" class="btn btn-purple w-full !mb-auto" (click)="joinGameByID(gameID)">üöÄ
                Rejoindre la partie</button>
        </div>
    </div>

    <div class="subcard border-blue-500/20">
        <div class="subcard__title text-blue-400">
            üéØ Mes parties actives
        </div>
        <div class="table__custom" *ngIf="activeGames.length > 0; else noGames">
            <table>
                <thead data-slot="table-header">
                    <tr data-slot="table-row">
                        <th data-slot="table-head">
                            Adversaire</th>
                        <th data-slot="table-head">
                            Type</th>
                        <th data-slot="table-head">
                            Date</th>
                        <th data-slot="table-head">
                            Statut</th>
                        <th data-slot="table-head">
                            Actions</th>
                    </tr>
                </thead>
                <tbody data-slot="table-body">
                    <tr *ngFor="let activeGame of activeGames" data-slot="table-row">
                        <td data-slot="table-cell" class="font-medium flex items-center space-x-2">
                            <span data-slot="avatar-fallback"
                                class="table__custom__avatar bg-gradient-to-br from-blue-400 to-purple-400">{{(activeGame.adversaryUsername?.[0]
                                | titlecase) || 'N/A'}}
                            </span>
                            <span>{{activeGame.adversaryUsername || '' | titlecase}}</span>
                        </td>
                        <td data-slot="table-cell">
                            <app-badge data-slot="badge"
                                [status]="activeGame.isPrivate ? GameVisibility.PRIVATE : GameVisibility.PUBLIC">
                            </app-badge>
                        </td>
                        <td data-slot="table-cell" class="text-muted">
                            {{ activeGame.createdAt | timeAgo}}</td>
                        <td data-slot="table-cell">
                            <app-badge data-slot="badge" [status]="activeGame.status"></app-badge>
                        </td>
                        <td data-slot="table-cell" class="space-x-2">
                            <button data-slot="button" class="btn btn-blue" (click)="joinActiveGame(activeGame.id)">
                                Reprendre</button>
                            <button data-slot="button" class="btn btn-red-outline" (click)="leaveGame(activeGame.id)">
                                Quitter
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="subcard border-orange-500/20">
        <div class="flex justify-between items-center text-orange-400">
            <div class="subcard__title">
                üåç Parties publiques
            </div>
            <span class="text-3xl cursor-pointer" [ngClass]="{'animate-spin': publicGameIsLoading}"
                (click)="fetchPublicGames()">‚ü≥</span>
        </div>
        <div class="table__custom" *ngIf="publicGames.length > 0; else noGames">
            <table>
                <thead data-slot="table-header">
                    <tr data-slot="table-row">
                        <th data-slot="table-head">
                            Cr√©ateur</th>
                        <th data-slot="table-head">
                            Date de cr√©ation</th>
                        <th data-slot="table-head">
                            Action</th>
                    </tr>
                </thead>
                <tbody data-slot="table-body">
                    <tr *ngFor="let publicGame of publicGames" data-slot="table-row">
                        <td data-slot="table-cell" class="font-medium flex items-center space-x-2">
                            <span data-slot="avatar-fallback"
                                class="table__custom__avatar bg-gradient-to-br from-blue-400 to-purple-400">{{(publicGame.creator[0]
                                | titlecase)}}
                            </span>
                            <span>{{publicGame.creator | titlecase}}</span>
                        </td>
                        <td data-slot="table-cell" class="text-muted">
                            {{ publicGame.createdAt | timeAgo}}</td>
                        <td data-slot="table-cell">
                            <button data-slot="button" class="btn btn-blue" (click)="joinGameByID(publicGame.id)">
                                Rejoindre
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<ng-template #noGames>
    <p class="text-2xl text-center font-semibold">Pas de parties</p>
</ng-template>